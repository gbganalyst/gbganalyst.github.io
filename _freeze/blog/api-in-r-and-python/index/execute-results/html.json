{
  "hash": "a6b82046e24186379ec2afb647ce9f81",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"How to fetch API data in R and Python\"\ndescription: | \n  This tutorial will teach you how to fetch data from an external source using HTTP requests and parse the data into a usable format.\ndate: \"08-14-2024\"\ncategories: \n  - API\n  - R\n  - Python\n\nlightbox: true\n\nimage: how-api-work.jpg\n\nformat: \n  html:\n    fig-cap-location: bottom\n    include-before-body: ../../html/margin_image.html\n    include-after-body: ../../html/blog_footer.html\n    page-layout: full # custom #article,\n    code-fold: false\n#    link-external-icon: true\n#    link-external-newwindow: true\n#editor: visual\neditor: \n  markdown: \n    wrap: sentence\nexecute:\n  error: true\n  eval: false\n  echo: true #fenced\n  freeze: auto\neditor_options: \n  chunk_output_type: console\n  \nresources: \n  - \"how-api-work.jpg\"\ntwitter-card:\n  title: \"How to fetch API data in R and Python\"\n  image: \"how-api-work.jpg\"\n  image-width: \"1280\"\n  image-height: \"720\"\nopen-graph:\n  title: \"How to fetch API data in R and Python\"\n  image: \"how-api-work.jpg\" \n  image-width: \"1280\"\n  image-height: \"720\"\n---\n\n\n\n\n\n## What is an API?\n\n![Image source: Unsplash](API.jpg){style=\"float:right;\" fig-alt=\"API image\" width=\"200\"}\n\nAn API (Application Programming Interface) is a set of protocols, routines, and tools used for building software applications.\nIt is essentially a set of rules and methods that data analyst or software developers can use to interact with and access the services and features provided by another application, service or platform.\n\nIn simpler terms, an API allows different software applications to communicate with each other and share data in a standardized way.\nWith APIs, developers or analysts can get data without needing to scrape the website, manually download it, or directly go to the company from which they need it.\n\n![How API work](how-api-work.jpg){#fig-elephant fig-align=\"left\" width=\"70%\"}\n\nFor example, if you want to integrate a weather forecast feature into your app, you can use a weather API that provides the necessary data, rather than building the entire feature from scratch.\nThis allows you to focus on the unique aspects of your app, without worrying about the underlying functionality.\n\n## Type of request methods\n\n\n\n\n\n::: {.cell layout-align=\"left\"}\n::: {.cell-output-display}\n![Types of request method](image-849919650.png){#fig-api-method fig-align='left' width=488}\n:::\n:::\n\n\n\n\n\nAs shown in @fig-api-method, the most common type of API request method is `GET`.\n\n## General rules for using an API\n\nTo use an API to extract data, you will need to follow these steps:\n\n1.  Find an API that provides the data you are interested in.\n    This may involve doing some research online to find available APIs.\n\n2.  Familiarize yourself with the API's documentation to understand how to make requests and what data is available.\n\n3.  Use a programming language to write a script that sends a request to the API and receives the data.\n    Depending on the API, you may need to include authentication parameters in the request to specify the data you want to receive.\n\n4.  Parse the data you receive from the API to extract the information you are interested in.\n    The format of the data will depend on the API you are using, and may be in JSON, XML, or another format.\n\n5.  Process the extracted data in your script, or save it to a file or database for later analysis.\n\n## How to fetch API data using a programming language\n\n### with R {#sec-api-r}\n\nThere are several packages available in R for consuming APIs.\nSome of the most commonly used packages are:\n\n1.  **httr**: This package provides convenient functions for making HTTP requests and processing the responses.\n\n2.  **jsonlite**: This package is used for parsing JSON data, which is a common format for API responses.\n\n3.  **RCurl**: This package is a wrapper around the libcurl library, which is a powerful and versatile HTTP client library.\n\nTo get data from an API in R, you need to follow these steps:\n\n1.  Install the required packages by running the following command in the R console:\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-summary=\"installation of packages\"}\ninstall.packages(c(\"httr\", \"jsonlite\", \"RCurl\"))\n```\n:::\n\n\n\n\n\n2.  Load the packages by running the following command:\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-summary=\"Loading of packages\"}\nlibrary(httr)\n\nlibrary(jsonlite)\n\nlibrary(RCurl)\n```\n:::\n\n\n\n\n\n3.  Make an API request by using the GET function from the httr package. The API endpoint should be passed as an argument to this function.\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nresponse <- GET(\"https://api.example.com/endpoint\")\n```\n:::\n\n\n\n\n\n4.  Check the status code of the response to see if the request was successful. A status code of `200` indicates a successful request.\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-summary=\"Request status\"}\nstatus_code <- status_code(response)\n```\n:::\n\n\n\n\n\n5.  Extract the data from the response. If the API returns data in JSON format, you can use the `fromJSON` function from the `jsonlite` package to parse the data. Store the data in a variable for later use.\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-summary=\"Resulting dataframe\"}\napi_data <- fromJSON(content(response, as = \"text\"))\n```\n:::\n\n\n\n\n\nThese are the basic steps to get data from an API in R.\nDepending on the API, you may need to pass additional parameters or authentication information in your request.\nFor example,\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-summary=\"API with access key\"}\nresponse <- GET(\n  \"https://api.example.com/endpoint\",\n  authenticate(\n    user = \"API_KEY_HERE\",\n    password = \"API_PASSWORD_HERE\",\n    type = \"basic\"\n  )\n)\n```\n:::\n\n\n\n\n\n### with Python {#sec-api-py}\n\nTo use an API in Python, you can use a library such as `requests` or `urllib` to send HTTP requests to the API and receive responses.\nHere's an example of how to use an API in Python using the requests library:\n\n\n\n\n\n::: {.cell}\n\n```{.python .cell-code}\nimport requests\n\n# Define the API endpoint URL and parameters\nendpoint = 'https://api.example.com/data'\n\nparams = {'param1': 'value1', 'param2': 'value2'}\n\n# Send a GET request to the API endpoint\nresponse = requests.get(endpoint, params = params)\n\n# Check if the request was successful\nif response.status_code == 200:\n    # Parse the response JSON data\n    data = response.json()\n\n    # Process the data, for example by printing it to the console\n    print(data)\nelse:\n    print(f'Error: {response.status_code}')\n```\n:::\n\n\n\n\n\nIn this example, we're using the `requests` library to send a GET request to an API endpoint at `https://api.example.com/data`, passing two parameters (`param1` and `param2`) in the request.\nThe `requests.get()` method returns a `Response` object, which we can use to check the response status code and parse the response data.\n\nIf the status code is `200`, we can assume the request was successful, and we can parse the response data using the `response.json()` method, which converts the JSON-formatted response to a Python object.\nWe can then process the data as needed, for example by printing it to the console.\n\nOf course, the exact API endpoint and parameters will depend on the specific API that you are using, and you'll need to consult the API documentation to learn how to construct your request correctly.\nBut this example should give you a sense of the general process involved in using an API in Python.\n\n## Practical example in R and Python\n\nWe will use R and Python to fetch the API data without and with the key.\n\n### Without the key\n\nIn this example, we will use an API from a site called [![](give_food.png){height=\"30\"}](https://www.givefood.org.uk/api/2/docs/) that uses an API without an API key.\nIn this case, we will be using a `GET` request to fetch the API data at the **food banks** using this link: <https://www.givefood.org.uk/api/2/foodbanks>.\nPlease follow the steps in @sec-api-r for R and @sec-api-py for Python.\n\n::: {.panel-tabset group=\"language\"}\n## R\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(httr)\n\nlibrary(jsonlite)\n\nlibrary(dplyr)\n\nresponse <- GET(\"https://www.givefood.org.uk/api/2/foodbanks\")\n\nstatus_code(response)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n#> [1] 200\n```\n\n\n:::\n\n```{.r .cell-code}\nfood_dataframe <- fromJSON(content(response, as = \"text\"), flatten = TRUE)\n\nfood_dataframe %>%\n  dim()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n#> [1] 919  27\n```\n\n\n:::\n\n```{.r .cell-code}\nfood_dataframe %>%\n  head()\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"\"],\"name\":[\"_rn_\"],\"type\":[\"\"],\"align\":[\"left\"]},{\"label\":[\"name\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"alt_name\"],\"name\":[2],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"slug\"],\"name\":[3],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"phone\"],\"name\":[4],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"secondary_phone\"],\"name\":[5],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"email\"],\"name\":[6],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"address\"],\"name\":[7],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"postcode\"],\"name\":[8],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"closed\"],\"name\":[9],\"type\":[\"lgl\"],\"align\":[\"right\"]},{\"label\":[\"country\"],\"name\":[10],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"lat_lng\"],\"name\":[11],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"network\"],\"name\":[12],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"created\"],\"name\":[13],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"urls.self\"],\"name\":[14],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"urls.html\"],\"name\":[15],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"urls.homepage\"],\"name\":[16],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"urls.shopping_list\"],\"name\":[17],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"charity.registration_id\"],\"name\":[18],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"charity.register_url\"],\"name\":[19],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"politics.parliamentary_constituency\"],\"name\":[20],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"politics.mp\"],\"name\":[21],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"politics.mp_party\"],\"name\":[22],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"politics.mp_parl_id\"],\"name\":[23],\"type\":[\"int\"],\"align\":[\"right\"]},{\"label\":[\"politics.ward\"],\"name\":[24],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"politics.district\"],\"name\":[25],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"politics.urls.self\"],\"name\":[26],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"politics.urls.html\"],\"name\":[27],\"type\":[\"chr\"],\"align\":[\"left\"]}],\"data\":[{\"1\":\"Sherborne Food Bank\",\"2\":\"NA\",\"3\":\"sherborne\",\"4\":\"07854163869\",\"5\":\"NA\",\"6\":\"help@sherbornefoodbank.org\",\"7\":\"c/o St Paul's Church\\\\r\\\\nSt Paul's Close\\\\r\\\\nSherborne\\\\r\\\\nDT9 4DU\",\"8\":\"DT9 4DU\",\"9\":\"FALSE\",\"10\":\"England\",\"11\":\"50.9563402,-2.5127485\",\"12\":\"IFAN\",\"13\":\"2020-02-29T10:40:45.496\",\"14\":\"https://www.givefood.org.uk/api/2/foodbank/sherborne/\",\"15\":\"https://www.givefood.org.uk/needs/at/sherborne/\",\"16\":\"https://www.sherbornefoodbank.org\",\"17\":\"https://www.sherbornefoodbank.org/what-we-need/\",\"18\":\"1156481\",\"19\":\"https://register-of-charities.charitycommission.gov.uk/charity-details/?regid=1156481&subid=0\",\"20\":\"West Dorset\",\"21\":\"Chris Loder\",\"22\":\"Conservative\",\"23\":\"4751\",\"24\":\"Sherborne East\",\"25\":\"Dorset\",\"26\":\"https://www.givefood.org.uk/api/2/constituency/west-dorset/\",\"27\":\"https://www.givefood.org.uk/needs/in/constituency/west-dorset/\",\"_rn_\":\"1\"},{\"1\":\"Himmah Food Bank\",\"2\":\"NA\",\"3\":\"himmah\",\"4\":\"01158376116\",\"5\":\"NA\",\"6\":\"info@himmah.org\",\"7\":\"Unit 2 Forest Court\\\\r\\\\nGamble Street\\\\r\\\\nRadford\\\\r\\\\nNottingham\\\\r\\\\nNG7 4EX\",\"8\":\"NG7 4EX\",\"9\":\"FALSE\",\"10\":\"England\",\"11\":\"52.95930370000001,-1.1665284\",\"12\":\"IFAN\",\"13\":\"2020-09-10T10:33:05.172\",\"14\":\"https://www.givefood.org.uk/api/2/foodbank/himmah/\",\"15\":\"https://www.givefood.org.uk/needs/at/himmah/\",\"16\":\"https://himmah.org/food\",\"17\":\"https://himmah.org/food/\",\"18\":\"1161021\",\"19\":\"https://register-of-charities.charitycommission.gov.uk/charity-details/?regid=1161021&subid=0\",\"20\":\"Nottingham East\",\"21\":\"Nadia Whittome\",\"22\":\"Labour\",\"23\":\"4869\",\"24\":\"Hyson Green & Arboretum\",\"25\":\"Nottingham\",\"26\":\"https://www.givefood.org.uk/api/2/constituency/nottingham-east/\",\"27\":\"https://www.givefood.org.uk/needs/in/constituency/nottingham-east/\",\"_rn_\":\"2\"},{\"1\":\"Felix Multibank\",\"2\":\"NA\",\"3\":\"felix-multibank\",\"4\":\"NA\",\"5\":\"NA\",\"6\":\"multibank@thefelixproject.org\",\"7\":\"Unit K3 Metropolitan Park \\\\r\\\\nFieldway\\\\r\\\\nGreenford\\\\r\\\\nUB6 8UN\",\"8\":\"UB6 8UN\",\"9\":\"FALSE\",\"10\":\"England\",\"11\":\"51.5414571,-0.359451\",\"12\":\"Independent\",\"13\":\"2024-07-28T14:22:20.673\",\"14\":\"https://www.givefood.org.uk/api/2/foodbank/felix-multibank/\",\"15\":\"https://www.givefood.org.uk/needs/at/felix-multibank/\",\"16\":\"https://thefelixproject.org/felixs-multibank\",\"17\":\"https://thefelixproject.org/felixs-multibank\",\"18\":\"1168183\",\"19\":\"https://register-of-charities.charitycommission.gov.uk/charity-details/?regid=1168183&subid=0\",\"20\":\"Ealing North\",\"21\":\"NA\",\"22\":\"NA\",\"23\":\"NA\",\"24\":\"Central Greenford\",\"25\":\"Ealing\",\"26\":\"https://www.givefood.org.uk/api/2/constituency/ealing-north/\",\"27\":\"https://www.givefood.org.uk/needs/in/constituency/ealing-north/\",\"_rn_\":\"3\"},{\"1\":\"St Thomas Food Bank\",\"2\":\"NA\",\"3\":\"st-thomas\",\"4\":\"01792455671\",\"5\":\"NA\",\"6\":\"community@sts.church\",\"7\":\"St Thomas Swansea\\\\r\\\\nLewis Street\\\\r\\\\nSt Thomas\\\\r\\\\nSA1 8BP\",\"8\":\"SA1 8BP\",\"9\":\"FALSE\",\"10\":\"Wales\",\"11\":\"51.6217966,-3.9286526\",\"12\":\"Independent\",\"13\":\"2023-09-25T06:35:41.765\",\"14\":\"https://www.givefood.org.uk/api/2/foodbank/st-thomas/\",\"15\":\"https://www.givefood.org.uk/needs/at/st-thomas/\",\"16\":\"https://www.sts.church/lyn\",\"17\":\"https://www.sts.church/lyn\",\"18\":\"NA\",\"19\":\"NA\",\"20\":\"Neath and Swansea East\",\"21\":\"Carolyn Harris\",\"22\":\"Labour\",\"23\":\"4480\",\"24\":\"St Thomas\",\"25\":\"Swansea\",\"26\":\"https://www.givefood.org.uk/api/2/constituency/neath-and-swansea-east/\",\"27\":\"https://www.givefood.org.uk/needs/in/constituency/neath-and-swansea-east/\",\"_rn_\":\"4\"},{\"1\":\"North Lochs Food Bank\",\"2\":\"NA\",\"3\":\"north-lochs\",\"4\":\"NA\",\"5\":\"NA\",\"6\":\"northlochshall@gmail.com\",\"7\":\"North Lochs Community Association\\\\r\\\\nIsle of Lewis\\\\r\\\\nHS2 9NU\",\"8\":\"HS2 9NU\",\"9\":\"FALSE\",\"10\":\"Scotland\",\"11\":\"58.1439514,-6.4650969\",\"12\":\"Independent\",\"13\":\"2022-06-17T08:25:12.494\",\"14\":\"https://www.givefood.org.uk/api/2/foodbank/north-lochs/\",\"15\":\"https://www.givefood.org.uk/needs/at/north-lochs/\",\"16\":\"https://www.northlochs.co.uk\",\"17\":\"https://www.northlochs.co.uk\",\"18\":\"NA\",\"19\":\"NA\",\"20\":\"Na h-Eileanan an Iar\",\"21\":\"Angus MacNeil\",\"22\":\"Scottish National\",\"23\":\"1546\",\"24\":\"Sg√¨re nan Loch\",\"25\":\"Na h-Eileanan Siar\",\"26\":\"https://www.givefood.org.uk/api/2/constituency/na-h-eileanan-an-iar/\",\"27\":\"https://www.givefood.org.uk/needs/in/constituency/na-h-eileanan-an-iar/\",\"_rn_\":\"5\"},{\"1\":\"Lapford Food Bank\",\"2\":\"NA\",\"3\":\"lapford\",\"4\":\"0136383788\",\"5\":\"NA\",\"6\":\"foodbank@lapfordcc.org.uk\",\"7\":\"Victory Hall\\\\r\\\\nLapford\\\\r\\\\nDevon\\\\r\\\\nEX17 6PZ\",\"8\":\"EX17 6PZ\",\"9\":\"FALSE\",\"10\":\"England\",\"11\":\"50.8597657,-3.8035064\",\"12\":\"Independent\",\"13\":\"2024-07-25T10:59:39.453\",\"14\":\"https://www.givefood.org.uk/api/2/foodbank/lapford/\",\"15\":\"https://www.givefood.org.uk/needs/at/lapford/\",\"16\":\"https://www.lapfordcc.org.uk/Groups/338252/Lapford_Foodbank.aspx\",\"17\":\"https://www.lapfordcc.org.uk/Groups/338252/Lapford_Foodbank.aspx\",\"18\":\"1186459\",\"19\":\"https://register-of-charities.charitycommission.gov.uk/charity-details/?regid=1186459&subid=0\",\"20\":\"Central Devon\",\"21\":\"NA\",\"22\":\"NA\",\"23\":\"NA\",\"24\":\"Taw Vale\",\"25\":\"Mid Devon\",\"26\":\"https://www.givefood.org.uk/api/2/constituency/central-devon/\",\"27\":\"https://www.givefood.org.uk/needs/in/constituency/central-devon/\",\"_rn_\":\"6\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\n\n\n\n## Python\n\n\n\n\n\n::: {.cell}\n\n```{.python .cell-code}\nimport requests\n\nimport pandas as pd\n\nresponse = requests.get(\"https://www.givefood.org.uk/api/2/foodbanks\")\n\n# Check if the request was successful\n\nprint(response.status_code)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n#> 200\n```\n\n\n:::\n\n```{.python .cell-code}\n# Parse the response JSON data\n\nfood_json = response.json()\n\n# Convert to a pandas dataframe\n\nfood_dataframe = pd.json_normalize(food_json)\n\nfood_dataframe.shape\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n#> (919, 27)\n```\n\n\n:::\n\n```{.python .cell-code}\nfood_dataframe.head()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n#>                     name  ...                                 politics.urls.html\n#> 0    Sherborne Food Bank  ...  https://www.givefood.org.uk/needs/in/constitue...\n#> 1       Himmah Food Bank  ...  https://www.givefood.org.uk/needs/in/constitue...\n#> 2        Felix Multibank  ...  https://www.givefood.org.uk/needs/in/constitue...\n#> 3    St Thomas Food Bank  ...  https://www.givefood.org.uk/needs/in/constitue...\n#> 4  North Lochs Food Bank  ...  https://www.givefood.org.uk/needs/in/constitue...\n#> \n#> [5 rows x 27 columns]\n```\n\n\n:::\n:::\n\n\n\n\n\nIn this example, we use the `pd.json_normalize()` method to flatten the list of dictionaries and create a dataframe from it.\nThe resulting dataframe has columns for each key in the JSON objects.\n:::\n\n### With the key\n\nIn this example, we will use an API from [![](image-874061681.png){width=\"156\" height=\"30\"}](https://www.reed.co.uk/developers/Jobseeker) that uses an API key.\nIn this case, we will use a `GET` request to fetch data for analyst jobs based in London from the [Jobseeker](https://www.reed.co.uk/api/1.0/search?keywords=analyst&location=london&distancefromlocation=15) API. Please follow the steps in @sec-api-r for R and @sec-api-py for Python, and sign up for the API key at the Jobseeker [website](https://www.reed.co.uk/developers/Jobseeker).\n\n::: {.panel-tabset group=\"language\"}\n## R\n\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(httr)\n\nlibrary(jsonlite)\n\nlibrary(dplyr)\n\n# Create a GET response to call the API\n\nresponse <- GET(\n  \"https://www.reed.co.uk/api/1.0/search?keywords=analyst&location=london&distancefromlocation=15\",\n  authenticate(\n    user = Sys.getenv(\"putyourapikeyhere\"),\n    password = \"\"\n  )\n)\n```\n:::\n\n\n\n\n\n::: callout-tip\nReplace `Sys.getenv(\"putyourapikeyhere\")` with your own API key.\n:::\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nstatus_code(response)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n#> [1] 200\n```\n\n\n:::\n\n```{.r .cell-code}\n# Convert the JSON string to a dataframe and view data in a table\n\njob_dataframe <- fromJSON(content(response, as = \"text\"), flatten = TRUE)\n\n# The job dataframe is inside the results\n\njob_dataframe$results %>%\n  dim()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n#> [1] 100  15\n```\n\n\n:::\n\n```{.r .cell-code}\njob_dataframe$results %>%\n  head()\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"\"],\"name\":[\"_rn_\"],\"type\":[\"\"],\"align\":[\"left\"]},{\"label\":[\"jobId\"],\"name\":[1],\"type\":[\"int\"],\"align\":[\"right\"]},{\"label\":[\"employerId\"],\"name\":[2],\"type\":[\"int\"],\"align\":[\"right\"]},{\"label\":[\"employerName\"],\"name\":[3],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"employerProfileId\"],\"name\":[4],\"type\":[\"lgl\"],\"align\":[\"right\"]},{\"label\":[\"employerProfileName\"],\"name\":[5],\"type\":[\"lgl\"],\"align\":[\"right\"]},{\"label\":[\"jobTitle\"],\"name\":[6],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"locationName\"],\"name\":[7],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"minimumSalary\"],\"name\":[8],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"maximumSalary\"],\"name\":[9],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"currency\"],\"name\":[10],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"expirationDate\"],\"name\":[11],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"date\"],\"name\":[12],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"jobDescription\"],\"name\":[13],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"applications\"],\"name\":[14],\"type\":[\"int\"],\"align\":[\"right\"]},{\"label\":[\"jobUrl\"],\"name\":[15],\"type\":[\"chr\"],\"align\":[\"left\"]}],\"data\":[{\"1\":\"53334560\",\"2\":\"560718\",\"3\":\"SSE PLC\",\"4\":\"NA\",\"5\":\"NA\",\"6\":\"Analyst\",\"7\":\"New Works\",\"8\":\"33500\",\"9\":\"50300\",\"10\":\"GBP\",\"11\":\"30/09/2024\",\"12\":\"19/08/2024\",\"13\":\"Analyst 550058 Closing at: Sep 9 2024 at 23:55 BST About the Role Base Location: &nbsp;We're proud to offer a Flexible First approach to work, and this role is no exception. We will, however need you to be reasonably commutable to our Slough Heat &amp; Power site, as you'll need to be in the office a few days per week.&nbsp; Salary: 33,500 - 50,300 up to 5% performance-related bonus a range of benefits to support your finances, wellbeing and fam...\",\"14\":\"33\",\"15\":\"https://www.reed.co.uk/jobs/analyst/53334560\",\"_rn_\":\"1\"},{\"1\":\"53119090\",\"2\":\"676738\",\"3\":\"IQ Talent Solutions\",\"4\":\"NA\",\"5\":\"NA\",\"6\":\"Finance Analyst\",\"7\":\"NW10AB\",\"8\":\"NA\",\"9\":\"NA\",\"10\":\"NA\",\"11\":\"29/08/2024\",\"12\":\"18/07/2024\",\"13\":\"IQ Talent Solutions are delighted to be recruiting a Group Finance Analyst for one of our most prestigious clients who are a global industry leader in the software sector.&nbsp; The role is based in Central London where there is a hybrid working policy in place. The role will pay a competitive basic salary, bonus, and industry leading benefits. You will own internal and external financial reports, monthly Board reports and other ad hoc analysis....\",\"14\":\"449\",\"15\":\"https://www.reed.co.uk/jobs/finance-analyst/53119090\",\"_rn_\":\"2\"},{\"1\":\"53262233\",\"2\":\"681871\",\"3\":\"Ruby Energy\",\"4\":\"NA\",\"5\":\"NA\",\"6\":\"Dialler Analyst\",\"7\":\"FY76TX\",\"8\":\"30000\",\"9\":\"30000\",\"10\":\"GBP\",\"11\":\"19/09/2024\",\"12\":\"08/08/2024\",\"13\":\"We have another new position available here at Ruby Energy for a data driven Dialler Analyst to join the growing team here at our offices in Fleetwood. The Dialler Analyst is responsible for assisting the outbound dialling system, ensuring that it operates efficiently and effectively to maximise agent productivity and enhance customer experience. The role involves monitoring system performance, analysing data, optimising dialling strategies, and...\",\"14\":\"14\",\"15\":\"https://www.reed.co.uk/jobs/dialler-analyst/53262233\",\"_rn_\":\"3\"},{\"1\":\"52724870\",\"2\":\"316408\",\"3\":\"Aon\",\"4\":\"NA\",\"5\":\"NA\",\"6\":\"Catastrophe Analyst\",\"7\":\"London\",\"8\":\"NA\",\"9\":\"NA\",\"10\":\"NA\",\"11\":\"17/09/2024\",\"12\":\"23/05/2024\",\"13\":\"Catastrophe Analyst Aon is currently recruiting a Catastrophe Analyst to join our Global Reinsurance Specialty (GRS) Analytics team in London. The team sits within Aon Reinsurance Solutions and provides clients with advice on their exposures to natural disasters such as windstorms, floods and earthquakes. These clients include London market (re)insurers, and global reinsurers buying retrocession. Comprised of hard-working and team-oriented indiv...\",\"14\":\"36\",\"15\":\"https://www.reed.co.uk/jobs/catastrophe-analyst/52724870\",\"_rn_\":\"4\"},{\"1\":\"53239157\",\"2\":\"651115\",\"3\":\"Vistry Group PLC\",\"4\":\"NA\",\"5\":\"NA\",\"6\":\"Finance Analyst\",\"7\":\"Warrington\",\"8\":\"NA\",\"9\":\"NA\",\"10\":\"NA\",\"11\":\"16/09/2024\",\"12\":\"05/08/2024\",\"13\":\"Role overview ID: 2024-6041 Entity: Vistry Works Region: Vistry Works Department: Finance &amp; Tax Contract Type: Permanent - Full Time Job Location: Warrington, Cheshire Date Posted: 05.08.2024 We have an exciting opportunity for a Finance Analyst to join our team within Vistry Works, at our Warrington office. As our Finance Analyst, you will support the Finance Manager in providing a comprehensive accounting service to the staff and managemen...\",\"14\":\"33\",\"15\":\"https://www.reed.co.uk/jobs/finance-analyst/53239157\",\"_rn_\":\"5\"},{\"1\":\"53330695\",\"2\":\"602057\",\"3\":\"City Plumbing\",\"4\":\"NA\",\"5\":\"NA\",\"6\":\"Pricing Analyst\",\"7\":\"NN67SL\",\"8\":\"NA\",\"9\":\"NA\",\"10\":\"NA\",\"11\":\"27/09/2024\",\"12\":\"19/08/2024\",\"13\":\"#BelongWithUs Come and join us as a Pricing Coordinator to improve and maintain our competitive pricing position, as well as being part of a friendly and successful team. The Role: As a&nbsp;Pricing Analyst you'll help improve and maintain our competitive price positioning. This Hybrid Pricing Analyst role will allow you to enter the world of Pricing working with large data sets and continuously looking for ways to offer our customers the best P...\",\"14\":\"24\",\"15\":\"https://www.reed.co.uk/jobs/pricing-analyst/53330695\",\"_rn_\":\"6\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\n\n\n\n## Python\n\n\n\n\n\n\n\n::: {.cell}\n\n```{.python .cell-code}\nimport requests\n\nimport pandas as pd\n\n# Set API endpoint and API key\n\nurl = \"https://www.reed.co.uk/api/1.0/search?keywords=analyst&location=london&distancefromlocation=15\"\n\napi_key = \"replace with your own API key\" \n```\n:::\n\n\n\n\n\nBased on the instructions in the API documentation, you will need to include your API key for all requests in a basic authentication http header as the username, leaving the password empty.\n\n\n\n\n\n::: {.cell}\n\n```{.python .cell-code}\n# Send a GET request to the API endpoint\n\nresponse = requests.get(url, auth = (api_key, ''))\n```\n:::\n\n::: {.cell}\n\n```{.python .cell-code}\n# Check if the request was successful\n\nprint(response.status_code)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n#> 200\n```\n\n\n:::\n\n```{.python .cell-code}\n# Parse the response JSON data\n\njob_json = response.json()\n\n# Convert to a pandas dataframe\n\n# The dataframe is inside the results\n\njob_dataframe = pd.json_normalize(job_json[\"results\"])\n\njob_dataframe.shape\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n#> (100, 15)\n```\n\n\n:::\n\n```{.python .cell-code}\njob_dataframe.head()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n#>       jobId  ...                                             jobUrl\n#> 0  53334560  ...       https://www.reed.co.uk/jobs/analyst/53334560\n#> 1  53119090  ...  https://www.reed.co.uk/jobs/finance-analyst/53...\n#> 2  53262233  ...  https://www.reed.co.uk/jobs/dialler-analyst/53...\n#> 3  52724870  ...  https://www.reed.co.uk/jobs/catastrophe-analys...\n#> 4  53239157  ...  https://www.reed.co.uk/jobs/finance-analyst/53...\n#> \n#> [5 rows x 15 columns]\n```\n\n\n:::\n:::\n\n\n\n\n:::\n\nYou can now use the data for your data science.\n\n## Other resources\n\nYou can also watch `Dean Chereden` YouTube video on how to GET data from an API using R in RStudio.\n\n\n\n\n\n{{< video https://www.youtube.com/watch?v=AhZ42vSmDmE&list=PLfXinLezajxuWY8QyhQ7joAC8bL_dz1pd&index=7 aspect-ratio=\"16x9\" >}}\n\n\n\n\n\n\n\n\n------------------------------------------------------------------------\n\nI hope you found this article informative.\nYou can find its GitHub repository [here](https://github.com/gbganalyst/API-in-R-and-Python).\nIf you enjoyed reading this write-up, please follow me on [Twitter](https://twitter.com/gbganalyst) and [Linkedin](https://linkedin.com/in/ezekiel-ogundepo) for more updates on `R`, `Python`, and `Excel` for data science.\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../../site_libs/pagedtable-1.1/css/pagedtable.css\" rel=\"stylesheet\" />\n<script src=\"../../site_libs/pagedtable-1.1/js/pagedtable.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}